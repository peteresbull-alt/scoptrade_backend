{% extends "dashboard/base.html" %}
{% block title %}KYC Requests - ScopTrade Admin{% endblock %}
{% block page_title %}KYC Requests{% endblock %}

{% block content %}
<!-- Status Tabs -->
<div class="flex gap-2 mb-6">
    <a href="?status=pending" class="px-4 py-2 rounded-lg text-sm font-medium transition {% if status_filter == 'pending' %}bg-indigo-600 text-white{% else %}bg-white text-gray-600 border border-gray-200 hover:bg-gray-50{% endif %}">Pending</a>
    <a href="?status=approved" class="px-4 py-2 rounded-lg text-sm font-medium transition {% if status_filter == 'approved' %}bg-indigo-600 text-white{% else %}bg-white text-gray-600 border border-gray-200 hover:bg-gray-50{% endif %}">Approved</a>
    <a href="?status=all" class="px-4 py-2 rounded-lg text-sm font-medium transition {% if status_filter == 'all' %}bg-indigo-600 text-white{% else %}bg-white text-gray-600 border border-gray-200 hover:bg-gray-50{% endif %}">All</a>
</div>

<div class="bg-white rounded-xl border border-gray-200/60 overflow-hidden">
    <div class="overflow-x-auto">
        <table class="w-full text-sm min-w-[700px]">
            <thead><tr class="bg-gray-50 text-left text-xs text-gray-500 uppercase">
                <th class="px-5 py-3">User</th><th class="px-5 py-3">Name</th><th class="px-5 py-3">Country</th><th class="px-5 py-3">ID Type</th><th class="px-5 py-3">Status</th><th class="px-5 py-3">Actions</th>
            </tr></thead>
            <tbody class="divide-y divide-gray-100">
            {% for u in kyc_requests %}
            <tr class="hover:bg-gray-50">
                <td class="px-5 py-3">
                    <div class="flex items-center gap-3">
                        <div class="w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center text-indigo-600 text-xs font-bold">{{ u.email|first|upper }}</div>
                        <span class="truncate max-w-[180px]">{{ u.email }}</span>
                    </div>
                </td>
                <td class="px-5 py-3">{{ u.first_name }} {{ u.last_name }}</td>
                <td class="px-5 py-3 text-gray-500">{{ u.country|default:"-" }}</td>
                <td class="px-5 py-3 capitalize text-gray-500">{{ u.id_type|default:"-" }}</td>
                <td class="px-5 py-3">
                    {% if u.is_verified %}<span class="px-2 py-0.5 rounded-full text-xs bg-emerald-50 text-emerald-700">Approved</span>
                    {% else %}<span class="px-2 py-0.5 rounded-full text-xs bg-amber-50 text-amber-700">Pending</span>{% endif %}
                </td>
                <td class="px-5 py-3">
                    <a href="{% url 'dashboard:kyc_detail' u.id %}" class="px-3 py-1.5 bg-indigo-50 text-indigo-600 rounded-lg text-xs font-medium hover:bg-indigo-100 transition">Review</a>
                </td>
            </tr>
            {% empty %}
            <tr><td colspan="6" class="px-5 py-12 text-center text-gray-400">No KYC requests found</td></tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% include "dashboard/pagination.html" %}
{% endblock %}
